---
title: Tree
categories: cs-ds
---

[1. 트리의 개념](#트리의-개념)  
[2. 트리의 종류](#트리의-종류)  
[3. 트리의 순회방식](#트리의-순회방식)

## 트리의 개념
+ 비선형 자료구조이다.
+ 계층적 관계를 표현하는 자료구조이다.
+ 트리는 값을 가진 노드(Node)와 이 노드들을 연결해주는 간선(Edge)로 이루어져 있다.
+ 모든 노드들은 0개 이상의 자식 노드를 갖고 있으며 보통 부모-자식 관계로 부른다.

### 트리를 구성하고 있는 구성요소들
+ 노드(Node) : 트리를 구성하고 있는 각각의 요소를 의미한다.
+ 간선(Edge) : 트리를 구성하기 위해 노드와 노드를 연결하는 선을 의미한다.
+ 루트 노드(Root Node) : 트리 구조에서 최상위에 있는 노드를 의미한다.
+ 단말 노드(Leaf Node) : 하위에 다른 노드가 연결되어 있지 않은 노드를 의미한다.
+ 비단말 노드(Internal Node) : 단말 노드를 제외한 모든 노드로 루트 노드를 포함한다.
+ 자식 노드(Child Node) : 자신과 간선을 잇는 하위 노드를 의미한다.
+ 부모 노드(Parent Node) : 자신과 간선을 잇는 상위 노드를 의미한다.
+ 형제 노드(Sibling Node) : 같은 부모를 가지는 노드를 의미한다.
+ 레벨(Level) : 루트 노드의 레벨 0에서 부터 시작해 트리에서 각 층별로 숫자를 매겨서 이를 트리의 레벨(Level)이라고 한다.
그리고 트리의 최고 레벨을 가리켜 해당 트리의 높이(Height)라고 한다.

### 트리의 특징
+ 트리는 그래프의 한 종류이며 최소 연결 트리라고 불린다.
+ 트리는 방향성이 있는 비순환 그래프의 한 종류이다.
    + 사이클이 없다
+ 모든 노드는 어떤 자료형으로 표현이 가능하다.
+ 루트에서 한 노드로 가는 경로는 유일하다.
+ 노드의 개수가 N개면 간선은 N-1개를 가진다.
+ 한개의 루트 노드만이 존재하며 모든 자식 노드는 한개의 부모 노드만을 가진다.

## 트리의 종류
[1. Binary Tree](#Binary-Tree)  
[2. Binary Search Tree](#Binary-Search-Tree)  
[3. Red Black Tree](#Red-Black-Tree)

### Binary Tree
+ 각 노드가 최대 두 개의 자식을 갖는 트리
+ 모든 레벨이 꽉 찬 이진 트리를 가리켜 포화 이진 트리라고 한다.
+ 위에서 아래로, 왼쪽에서 오른쪽으로 순서대로 차곡차곡 채워진 이진 트리를 가리켜 완전 이진 트리라고 한다.
+ 모든 노드가 0개 혹은 2개의 자식 노드만을 갖는 이진 트리를 가리켜 정 이진 트리라고 한다.

### Binary Search Tree
+ 이진 탐색 트리는 이진 트리의 일종이지만 데이터를 저장하는 규칙이 있으며 그 규칙은 특정 데이터의 위치를 찾는데 사용한다.
  + 규칙 1 : 이진 탐색 트리의 노드에 저장된 키는 유일하다.
  + 규칙 2 : 부모의 키가 왼쪽 자식 노드의 키보다 크다.
  + 규칙 3 : 부모의 키가 오른쪽 자식 노드의 키보다 작다.
  + 규칙 4 : 왼쪽 오른쪽 서브트리도 이진 탐색 트리이다.
+ 이진 탐색 트리의 탐색 연산은 O(log n)의 시간 복잡도를 갖는다.
+ 하지만 이러한 이진 탐색 트리는 Skewed Tree(편향 트리)가 될 수 있다.
    + 저장 순서에 따라 계속 한 쪽으로만 노드가 추가되는 경우가 발생하기 때문이다.
    + 이럴 경우 성능에 영향을 미치게 되며 최악 O(n)의 시간 복잡도를 갖는다.
+ 이를 해결하기 위해 균형을 잡기 위한 트리 구조 재조정을 위해 Rebalancing 기법이 등장하였고 
Red Black Tree 가 이 기법을 구현한 트리중 하나이다.

### Red Black Tree
+ BST 를 기반으로 하는 트리 형식의 자료구조이다.
+ Search, Insert, Delete 에 O(log n)의 시간 복잡도를 가진다.
+ 동일한 노드의 개수일 때, depth 를 최소화하여 시간 복잡도를 줄이는 것이 핵심 아이디어이다.
+ 동일한 노드의 개수일 때, depth 가 최소가 되는 경우는 트리가 포화 이진 트리인 경우이다.
+ Java Collection 에서 TreeMap 도 내부적으로 RBT 로 이루어져 있고, HashMap 에서의 [Separate Chaining](#Separate-Chaining) 에서도 사용된다.
그만큼 효율이 좋고 중요한 자료구조이다.

#### Separate Chaining
+ 자료 저장 시, 저장소(Bucket)에서 충돌이 일어나면 해당 값을 기존 값과 연결 시킴.
+ 연결 시 연결리스트(Linked List) 자료구조를 이용함.

#### Red Black Tree 정의
+ 각 노드는 Red or Black 이라는 색깔을 갖는다.
+ Root Node 의 색깔은 Black 이다.
+ 각 Leaf node 의 색깔은 Black 이다.
+ 어떤 노드의 색깔이 red 라면 두 개의 Children Node 의 색깔은 모두 Black 이다.
+ Black-Height : 노드 x 로부터 노드 x 를 포함하지 않은 Leaf Node 까지의 경로상에 있는 Black Node 의 개수가 같다.

#### Red Black Tree 삽입
1. BST 의 특성을 유지하면서 노드의 색깔을 Red 로 지정해 삽입한다.
    + Red 로 지정하는 이유는 Black-Height 변경을 최소화하기 위함이다.
2. 삽입 결과 RBT 의 특성 위배시 노드의 색깔을 조정하고 Black-Height 가 위배되었다면 rotation 을 통해 height 를 조정한다.
3. 이러한 과정을 통해 RBT 의 동일한 height 에 존재하는 internal node 들의 Black-height 가 같아지게 되고
최소 경로와 최대 경로의 크기 비율이 2 미만으로 유지된다.

#### Red Black Tree 삭제
1. 삭제도 삽입과 마찬가지로 BST 의 특성을 유지하면서 해당 노드를 삭제한다.
2. 삭제될 노드의 Child 의 개수에 따라 rotation 방법이 달라지게 된다.
3. 지워진 노드의 색깔이 Black 이라면 Black-Height 가 1 감소한 경로에 Black Node 가 1개 추가되도록 rotation 하고 노드의 색깔을 조정한다.
지워진 노드의 색깔이 red 라면 RBT 의 특성 위배하지 않으므로 RBT 가 그대로 유지된다.

## 트리의 순회방식
+ 전위 순회(pre-order) : 각 루트를 순차적으로 먼저 방문하는 방식이다.
  (Root ->  왼쪽 자식 -> 오른쪽 자식)
+ 중위 순회(in-order) : 왼쪽 하위 트리를 방문 후 루트를 방문하는 방식이다.
  (왼쪽 자식 -> Root -> 오른쪽 자식)
+ 후위 순회(post-order) : 왼쪽 하위 트리부터 하위를 모두 방문 후 루트를 방문하는 방식이다.
  (왼쪽 자식 -> 오른쪽 자식 -> Root)
+ 레벨 순회(level-order) : 루트부터 계층 별로 방문하는 방식이다.